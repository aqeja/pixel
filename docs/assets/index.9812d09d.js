var U=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var $=(t,r,s)=>r in t?U(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,C=(t,r)=>{for(var s in r||(r={}))P.call(r,s)&&$(t,s,r[s]);if(v)for(var s of v(r))L.call(r,s)&&$(t,s,r[s]);return t},I=(t,r)=>q(t,G(r));var F=(t,r)=>{var s={};for(var n in t)P.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&v)for(var n of v(t))r.indexOf(n)<0&&L.call(t,n)&&(s[n]=t[n]);return s};import{R as e,r as o,a as H}from"./vendor.db5e15db.js";const K=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}};K();var W="/pixel/assets/img.8bb84cac.svg";const z=e.forwardRef((l,n)=>{var c=l,{width:t=0,height:r=0}=c,s=F(c,["width","height"]);const u=o.exports.useRef(null),d=o.exports.useCallback(i=>{u.current=i,typeof n=="function"?n(i):n&&(n.current=i)},[n]);return o.exports.useEffect(()=>{const i=u.current,f=i==null?void 0:i.getContext("2d");if(!i||!f)return;const p=window.devicePixelRatio||1;t!==0&&r!==0&&(i.style.width=`${t}px`,i.style.height=`${r}px`),i.width=t*p,i.height=r*p,f.scale(p,p)},[u,t,r]),e.createElement("canvas",I(C({},s),{ref:d}))}),g=window.devicePixelRatio;function J(t){return new Promise(r=>{setTimeout(r,t)})}const B=l=>{var c=l,{className:t="",children:r,type:s}=c,n=F(c,["className","children","type"]);return e.createElement("div",C({className:`cursor-default flex justify-center items-center border border-dotted bg-gray-50 rounded-lg text-gray-600 ${t}`},n),r)},Q=()=>{const t=o.exports.useRef(null),[r,s]=o.exports.useState(20),n=o.exports.useRef(null),[l,c]=o.exports.useState(""),u=o.exports.useRef(null),[d,i]=o.exports.useState(""),[f,p]=o.exports.useState("rgba(0,0,0,0)"),[O,w]=o.exports.useState(!0),[N,A]=o.exports.useState(null),R=o.exports.useRef(null),y=o.exports.useCallback(()=>{u.current&&clearTimeout(u.current),u.current=window.setTimeout(async()=>{var S;const a=R.current;if(!a)return;const m=a==null?void 0:a.getContext("2d");if(!t.current||!m||!a)return;const{naturalWidth:x,naturalHeight:k}=t.current;m==null||m.clearRect(0,0,a.width,a.height),a.width=x*g,a.height=k*g,w(!0);const b=r;for(let h=0;h<k;h+=b)for(let E=0;E<x;E+=b){if(!t.current)return;const j=[E*g,h*g,b*g,b*g];m.drawImage(t.current,E,h,1,1,...j),m.strokeStyle=f,m.strokeRect(...j)}const T=((S=R.current)==null?void 0:S.toDataURL())||"";c(T),await J(100),w(!1)},100)},[r,f]),D=o.exports.useCallback(a=>{s(Number(a.target.value)),y()},[y]),M=o.exports.useCallback(async a=>{var x;const m=(x=a.target.files)==null?void 0:x[0];!m||(A(m),w(!0),i(URL.createObjectURL(m)))},[]);return e.createElement("div",{className:`h-screen  flex flex-col ${d?"bg-gray-50":"bg-white"}`},e.createElement("header",{className:`flex items-center shadow bg-white sticky top-0 py-2 px-4 ${d?"":"invisible"}`},e.createElement("img",{src:"site.png",className:"w-10",alt:""})),e.createElement("div",{className:"flex-grow mt-10 flex items-center justify-center"},e.createElement("div",{className:`${d?"":"invisible"}`},e.createElement("div",{className:"flex justify-center items-end"},e.createElement("img",{src:d,alt:"",className:"object-contain object-bottom",onClick:()=>{var a;(a=n.current)==null||a.click()},style:{width:300,height:300},ref:t,onLoad:y}),e.createElement("div",{className:"relative ml-20"},e.createElement("span",{style:{fontFamily:"'Press Start 2P'"},className:`absolute left-1/2 -translate-x-1/2 top-2 shadow-sm backdrop-filter backdrop-blur bg-gray-700 bg-opacity-40 text-xs text-white rounded font-medium py-1 px-2 ${O?"":"invisible"}`},"loading..."),e.createElement("img",{className:"object-contain object-bottom",src:l||d,alt:"",style:{width:500,height:500}}))),e.createElement("div",{className:"mt-10 pt-10 border-t border-solid justify-center flex items-center"},e.createElement("div",{className:"mx-6"},e.createElement("p",{className:"text-xs text-gray-400 mb-1"},"\u683C\u5B50\u5C3A\u5BF8"),e.createElement("input",{type:"range",min:1,max:100,step:1,value:r,onChange:D})),e.createElement("div",{className:"mx-6 hidden"},e.createElement("p",{className:"text-xs text-gray-400 mb-1"},"\u8FB9\u6846\u989C\u8272"),e.createElement("input",{type:"color",value:f,onChange:a=>{p(a.target.value),y()}}))))),e.createElement("div",{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 ${d?"invisible":""}`},e.createElement("h1",{style:{fontFamily:"chn-pixel"},className:"text-5xl mb-10 text-[#f19300] text-center"},"\u50CF\u7D20\u5316\u4F60\u7684\u56FE\u7247"),e.createElement("img",{src:"pic.png",alt:""}),e.createElement(B,{className:"mt-10 mx-auto w-60 h-12 px-6 bg-gray-700 !text-white !border-none",onClick:()=>{var a;(a=n.current)==null||a.click()},style:{fontFamily:"chn-pixel"}},"\u9009\u62E9\u4E00\u5F20\u56FE\u7247")),e.createElement("footer",{className:`flex justify-center items-center p-5 bg-white shadow ${d?"":"invisible"}`,style:{fontFamily:"chn-pixel"}},e.createElement("label",null,e.createElement(B,{className:"w-36 h-12"},e.createElement("img",{src:W,className:"w-6 mr-2",alt:""}),"\u66F4\u6362\u56FE\u7247"),e.createElement("input",{type:"file",onChange:M,hidden:!0,ref:n,accept:"image/*"})),e.createElement("a",{href:l,download:(N==null?void 0:N.name)||"file.png",className:"ml-6 h-12 inline-flex items-center justify-center px-6 rounded-lg text-white bg-gray-700 font-medium"},"\u4FDD\u5B58\u5230\u672C\u5730")),e.createElement(z,{ref:R,hidden:!0}))};function V(){return e.createElement(Q,null)}H.render(e.createElement(e.StrictMode,null,e.createElement(V,null)),document.getElementById("root"));
